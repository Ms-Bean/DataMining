<!DOCTYPE html>
<html>
    <body>
        <h1>Video queries</h1>
	<h2>This is a college machine learning project. If you enter a query and submit, it will give you the 3 most relevant videos to that query out of 50 taken from the npr news youtube channel. Some queries that show obvious correlation are "woman in a purple sweater", "pacific ocean", "student debt", and "israel" (especially the topmost result)
		<br><br><br>
	<p1 id="error_message"></p1>
        <form>
          Query: <input type="text" id="query"><br>
          <input type="button" onclick="get_videos()" value="Submit">
        </form>
        <div id="videos"></div>
    </body>
    <script>
        async function get_data(query){

          const response = await fetch("http://thinkcenter.ddns.me:5000/get_links", {
            method: "GET", 
            mode: "cors",
            cache: "no-cache", 
            headers: {
                "query" : query
            },
            redirect: "follow", 
            referrerPolicy: "no-referrer", 
            });
            return response.json();
        }

        function get_videos()
        {  
            document.getElementById("videos").innerHTML = "";
            query = document.getElementById("query").value
            get_data(query).then((response) =>{
                console.log(response);
                if(response[0].length != 3)
                {
                    document.getElementById("error_message").innerHTML = response[0]
                }
                for(let i = 0; i < response[0].length; i++)
                {
                    vid = document.createElement("video");
		    br = document.createElement("br");
                    src = document.createElement("source");
                    vid.setAttribute("controls", "");
                    vid.setAttribute("width", 420);
                    vid.setAttribute("height", 320);
                    src.setAttribute("type", "video/mp4");
                    src.setAttribute("src", "http://thinkcenter.ddns.me/videos/" + response[0][i] + "#t=0.1");
                    vid.appendChild(src);
                    document.getElementById("videos").appendChild(vid);
	            document.getElementById("videos").appendChild(br);
                }
            });
        }
        
    </script>
</html>
